
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Fix ASP.Net form submit behavior with jQuery</title>
    
    <meta name="author" content="Peter Gerritsen">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Peter Gerritsen’s blog</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h1>Fix ASP.Net form submit behavior with jQuery </h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>06 February 2009</span>
    </div>
    <div class="content">
      <p>In standard ASP.Net web form pages there&#8217;s only one form tag for the entire page. This unfortunately has some side effects on form submit behavior.</p>

<p>In a standard HTML all forms are contained in their own form tag. When the browser receives a enter key press for the form the form is submitted. Because of the single form in a ASP.Net web form this behavior will be broken and the first submit button on the page will always be triggered by the browser when pressing enter.</p>

<p>Microsoft has included a feature in ASP.Net 2.0 to overcome this problem. In short you add an attribute <em>DefaultButton</em>, with the ID of the button to trigger, to an ASP Panel control that wraps the form. Unfortunately this solution doesn&#8217;t work in Firefox.</p>

<p>To fix this, I decided to use jQuery. What we need to have is a way to identify the different forms on a page and connect them with the right submit button. So I added a fieldset tag around the single form:</p>

<p><code>csharp
writer.WriteLine(&quot;&lt;div class=\&quot;regular_forms\&quot;&gt;&quot;);
writer.WriteLine(&quot;&quot;, btnSearch.ClientID);
// form contents go here
writer.WriteLine(&quot;&lt;/fieldset&gt;&lt;/div&gt;&quot;);
</code></p>

<p>The control <em>btnSearch</em> is the one we want to trigger when a user presses the enter button.</p>

<p>To hook up the button to the form we use the following JavaScript/jQuery:</p>

<p><code>javascript
$(document).ready(function() {
    $(&quot;fieldset[defaultsubmitbutton]&quot;).each(function() {
        var submitbuttonid = $(this).attr(&quot;defaultsubmitbutton&quot;);
        $(&quot;input[type=&#39;text&#39;], input[type=&#39;password&#39;]&quot;, this).keydown(function(e) {
            var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;
            if (key == 13) {
                e.preventDefault();
                var button = $(&quot;#&quot; + submitbuttonid).eq(0);
                if (button.length &gt; 0) {
                    if (typeof (button.get(0).onclick) == &#39;function&#39;) {
                        button.trigger(&#39;click&#39;);
                    }
                    else if (button.attr(&#39;href&#39;)) {
                        window.location = button.attr(&#39;href&#39;); } else {
                        button.trigger(&#39;click&#39;);
                    }
                }
            }
        });
    });
});
</code></p>

<p>This script finds all fieldset elements containing the <em>defaultsubmitbutton</em> attribute, locates all textboxes and password fields within that fieldset and hooks up the keydown event. When the enter key is pressed (keycode 13) the default event is canceled and depending on the type of button the right postback method is triggered.</p>
    </div>

    

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#ASP.Net-ref">ASP.Net <span>6</span></a></li>
     
    	<li><a href="/tags.html#jQuery-ref">jQuery <span>7</span></a></li>
    
  



    </ul>
    

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2009/02/03/retrieving-tasks-assigned-to-users-or-one-of-their-groups" title="Retrieving Tasks assigned to users or one of their groups">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/2009/02/13/creating-a-3d-tagcloud-in-silverlight-part-1" title="Creating a 3D tagcloud in Silverlight (part 1)">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    var disqus_identifier = '570 http://username.github.io/?p=570';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
</div>


      </div>
      <hr>
      <footer>
        <p>&copy; 2013 Peter Gerritsen
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    
  </body>
</html>

